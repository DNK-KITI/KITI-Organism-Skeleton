# MOTOR PLANNING CORE · Двигательный планировщик организма KITI

Motor Planning Core — это мозг движений.  
Он принимает задачу («идти вперёд», «поднять предмет», «прыгнуть»),
разбивает её на микрокоманды и выстраивает безопасную траекторию.

---

## 1. Основные функции

- построение модели движения,
- расчёт траектории,
- предсказание нагрузки,
- оптимизация углов и темпов,
- учёт Stability, SensorCore, Coordination,
- защита от опасных траекторий,
- связь с Limb Controller и Joint Control.

Модуль гарантирует, что движение будет корректным, стабильным и выполнимым.

---

## 2. Входные параметры

### • MoveIntent  
Высокоуровневая команда: шаг, поворот, прыжок, подъем предмета, перенос.

### • BodyMap  
Статус всех конечностей, длины сегментов, доступные углы.

### • StabilityCore  
На каких шагах возможны нарушения равновесия.

### • SensorCore  
Данные об окружении и контактах.

### • TerrainCore  
Тип поверхности: ровная, рыхлая, склон, лестница, лёд.

---

## 3. Этапы планирования

1. **Анализ намерения** — что требуется выполнить.
2. **Проверка состояния тела** — возможно ли движение сейчас.
3. **Расчёт траектории** — набор безопасных микрокоманд.
4. **Проверка устойчивости** — где есть риски падения.
5. **Генерация плана** — последовательность шагов.
6. **Выдача команд** Limb Controller + Joint Control.

---

## 4. Примеры команд

- шаг вперёд с поправкой на скользкое покрытие;
- перенос веса перед прыжком;
- отклонение центра масс для резкого поворота;
- плавная подъёмная траектория для удержания баланса.

---

## 5. Безопасность

Модуль блокирует движение если:

- перегрузка,
- превышение угла,
- потеря равновесия,
- опасная поверхность,
- повреждённая конечность.

---

## 6. SRL метки

- "motor_plan_start"
- "motor_plan_step"
- "motor_plan_ready"
- "motor_plan_denied"
- "motor_plan_adjust"
- "motor_plan_abort"
